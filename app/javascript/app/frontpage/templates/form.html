<div (click)="showFrontpage()" class="btn">&#8592; Tilbage til forsiden</div>
<div *ngIf="uploading_file_to_aws">
  <div class="text-center">Filen er ved at blive uploadet til en ekstern server</div>
  <div class="progress">
    <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div>
  </div>
</div>
<h3 class="pt-4 text-center">Oprettelse af podcast</h3>
<div *ngIf="error_message" class="notice bg-warning text-white text-center">Løs fejlen før du fortsætter: {{error_message}}</div>
<div class="container mt-4">

  <form [formGroup]="podcastForm" (ngSubmit)="podcastSubmit(podcastForm)">

    <div class="form-group">
      <image-upload 
        (removed)="imageRemoved($event)"
        buttonCaption="Upload ikon"
        dropBoxMessage="Slip billede her"
        [max]="1"
        ></image-upload>
    </div>

    <div class="form-group">
      <input class="form-control form-control-lg" required placeholder="Titlen" type="text" formControlName="title" />
      <small *ngIf="!podcastForm.get('title').valid && podcastForm.get('title').dirty" 
        class="text-muted text-warning">Din podcast skal indeholde en titel</small>
    </div>

    <div class="form-group">
      <input class="form-control" type="text" placeholder="Undertitel" formControlName="subtitle" />
    </div>

    <div class="form-group">
      <textarea class="form-control" placeholder="Resumé" rows="3" formControlName="summary"></textarea>
    </div>

    <div formArrayName="audios_attributes" *ngFor="let audio of podcastForm.get('audios_attributes').controls; let i=index;">

      <div class="border p-4" [formGroupName]="i">
        <h6>Fil:</h6>

        <div class="form-group">
          <input #dom_file type="file" class="form-control-file"
            (change)="setFile($event, file)">
        </div>
        <audio #dom_audio (canplaythrough)="setDuration($event)" id="audio"></audio>
        <small *ngIf="!file" class="text-muted text-warning">Din podcast skal have en lydfil</small>
      </div>

    </div><!-- formArray end -->
    <hr>

    <input type="submit" [disabled]="!file || podcastForm.get('title').invalid" value="Gem podcast" class="btn btn-primary"/>

  </form>

</div>
